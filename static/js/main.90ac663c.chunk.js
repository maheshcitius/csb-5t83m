(this["webpackJsonporgchart-mah"]=this["webpackJsonporgchart-mah"]||[]).push([[0],{35:function(e,t,a){e.exports=a(60)},40:function(e,t,a){},41:function(e,t,a){},55:function(e,t,a){},56:function(e,t,a){},57:function(e,t,a){},59:function(e,t,a){},60:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(21),o=a.n(c),i=(a(40),a(16)),l=a(11),s=(a(41),function(){return r.a.createElement("div",{className:"home-wrapper"},r.a.createElement("div",null,r.a.createElement(i.b,{to:"chart"},r.a.createElement("div",{className:"chart-link"},"Click to View Chart"))))}),d=a(9),u=a(15),m=a(4),p=a.n(m),h=a(7),f=a(3),b=a(13),v=a.n(b),g=a(66),j=a(65),O=new j.a,E=new j.a,N=function(){return O.asObservable()},w=function(e){return E.next({selectedNodeId:e})},C=function(){return E.next()},y=function(){return E.asObservable()},S=a(24),x=a.n(S),k=a(26),L=(a(55),function e(t){var a=t.datasource,c=t.NodeTemplate,o=t.draggable,i=t.collapsible,l=t.multipleSelect,s=t.changeHierarchy,d=t.onClickNode,m=Object(n.useRef)(),p=Object(n.useState)(!1),h=Object(f.a)(p,2),b=h[0],v=h[1],g=Object(n.useState)(),j=Object(f.a)(g,2),O=j[0],E=j[1],C=Object(n.useState)(),S=Object(f.a)(C,2),x=S[0],k=S[1],L=Object(n.useState)(),T=Object(f.a)(L,2),A=T[0],D=T[1],M=Object(n.useState)(),I=Object(f.a)(M,2),H=I[0],R=I[1],P=Object(n.useState)(!1),z=Object(f.a)(P,2),U=z[0],q=z[1],B=Object(n.useState)(!1),X=Object(f.a)(B,2),Y=X[0],_=X[1],J=["oc-node",b?"isChildrenCollapsed":"",U?"allowedDrop":"",Y?"selected":""].filter((function(e){return e})).join(" ");Object(n.useEffect)((function(){var e=N().subscribe((function(e){q(!!e&&!document.querySelector("#"+e.draggedNodeId).closest("li").querySelector("#"+m.current.id))})),t=y().subscribe((function(e){e?l?e.selectedNodeId===a.id&&_(!0):_(e.selectedNodeId===a.id):_(!1)}));return function(){e.unsubscribe(),t.unsubscribe()}}),[l,a]);var W=function e(t){var a=t.parentNode.closest("li");if(a)if(a.firstChild.classList.contains("hidden"))t.classList.remove("isAncestorsCollapsed"),a.firstChild.classList.remove("hidden");else{var n,r=Array.from(t.parentNode.children).some((function(e){return e.classList.contains("hidden")}));r||F(t),(n=t.classList).add.apply(n,Object(u.a)(("isAncestorsCollapsed"+(r?"":" isSiblingsCollapsed")).split(" "))),a.firstChild.classList.add("hidden"),a.parentNode.closest("li")&&!a.parentNode.closest("li").firstChild.classList.contains("hidden")&&e(a)}},F=function(e){var t=e.previousSibling,a=Array.from(e.parentNode.children).some((function(e){return e.classList.contains("hidden")}));for(e.classList.toggle("isSiblingsCollapsed",!a);t;)a?t.classList.remove("hidden"):t.classList.add("hidden"),t=t.previousSibling;for(t=e.nextSibling;t;)a?t.classList.remove("hidden"):t.classList.add("hidden"),t=t.nextSibling;e.parentNode.closest("li").firstChild.classList.contains("hidden")&&W(e)},G=function(e){e.stopPropagation(),R(!H),k(!x),F(e.target.closest("li"))};return r.a.createElement("li",{className:"oc-hierarchy"},r.a.createElement("div",{ref:m,id:a.id,className:J,draggable:o?"true":void 0,onClick:function(e){d&&d(a),w(a.id)},onMouseEnter:function(e){var t=e.target.closest("li"),a=t.parentNode.closest("li"),n=t&&a?a.firstChild.classList.contains("hidden"):void 0,r=Array.from(t.parentNode.children).some((function(e){return e.classList.contains("hidden")}));E(!n),k(!r),R(!r),D(!b)},onMouseLeave:function(){E(void 0),k(void 0),D(void 0),R(void 0)}},c?r.a.createElement(c,{nodeData:a}):r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"oc-heading"},a.relationship&&"1"===a.relationship.charAt(2)&&r.a.createElement("i",{className:"oci oci-leader oc-symbol"}),a.name),r.a.createElement("div",{className:"oc-content"},a.title),r.a.createElement("div",{className:"oc-content"},a.doj&&a.doj)),i&&a.relationship&&"1"===a.relationship.charAt(0)&&r.a.createElement("i",{className:"oc-edge verticalEdge topEdge oci ".concat(void 0===O?"":O?"oci-chevron-down":"oci-chevron-up"),onClick:function(e){e.stopPropagation(),E(!O),W(e.target.closest("li"))}}),i&&a.relationship&&"1"===a.relationship.charAt(1)&&r.a.createElement(r.a.Fragment,null,r.a.createElement("i",{className:"oc-edge horizontalEdge rightEdge oci ".concat(void 0===x?"":x?"oci-chevron-left":"oci-chevron-right"),onClick:G}),r.a.createElement("i",{className:"oc-edge horizontalEdge leftEdge oci ".concat(void 0===H?"":H?"oci-chevron-right":"oci-chevron-left"),onClick:G})),i&&a.relationship&&"1"===a.relationship.charAt(2)&&r.a.createElement("i",{className:"oc-edge verticalEdge bottomEdge oci ".concat(void 0===A?"":A?"oci-chevron-up":"oci-chevron-down"),onClick:function(e){e.stopPropagation(),v(!b),D(!A)}})),a.children&&a.children.length>0&&r.a.createElement("ul",{className:b?"hidden":""},a.children.map((function(t){return r.a.createElement(e,{datasource:t,NodeTemplate:c,id:t.id,key:t.id,collapsible:i,multipleSelect:l,changeHierarchy:s,onClickNode:d})}))))});L.defaultProps={draggable:!1,collapsible:!0,multipleSelect:!1};var T=L,A=(a(56),Object(n.forwardRef)((function(e,t){var a=e.datasource,c=e.pan,o=e.zoom,i=e.zoomoutLimit,l=e.zoominLimit,s=e.containerClass,u=e.chartClass,m=e.NodeTemplate,b=e.draggable,g=e.collapsible,j=e.multipleSelect,O=e.onClickNode,E=e.onClickChart,N=Object(n.useRef)(),w=Object(n.useRef)(),y=Object(n.useRef)(),S=Object(n.useState)(0),L=Object(f.a)(S,2),A=L[0],D=L[1],M=Object(n.useState)(0),I=Object(f.a)(M,2),H=I[0],R=I[1],P=Object(n.useState)(""),z=Object(f.a)(P,2),U=z[0],q=z[1],B=Object(n.useState)(!1),X=Object(f.a)(B,2),Y=X[0],_=X[1],J=Object(n.useState)("default"),W=Object(f.a)(J,2),F=W[0],G=W[1],V=Object(n.useState)(!1),$=Object(f.a)(V,2),K=$[0],Q=$[1],Z=Object(n.useState)(""),ee=Object(f.a)(Z,2),te=ee[0],ae=ee[1],ne=Object(n.useState)(""),re=Object(f.a)(ne,2),ce=re[0],oe=re[1],ie=Object(n.useState)(a),le=Object(f.a)(ie,2),se=le[0],de=le[1];Object(n.useEffect)((function(){de(a)}),[a]);var ue=new v.a(a,"id","children"),me=function(){var e=Object(h.a)(p.a.mark((function e(t,a){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ue.removeNode(t.id);case 2:return e.next=4,ue.addChildren(a,t);case 4:de(Object(d.a)({},ue.ds));case 5:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}();return Object(n.useImperativeHandle)(t,(function(){return{exportTo:function(e,t){e=e||"OrgChart",t=t||"png",Q(!0);var a=N.current.scrollLeft;N.current.scrollLeft=0;var n=N.current.scrollTop;N.current.scrollTop=0,x()(w.current,{width:w.current.clientWidth,height:w.current.clientHeight,onclone:function(e){e.querySelector(".orgchart").style.background="none",e.querySelector(".orgchart").style.transform=""}}).then((function(r){"pdf"===t.toLowerCase()?function(e,t){var a=Math.floor(e.width),n=Math.floor(e.height),r=a>n?new k.a({orientation:"landscape",unit:"px",format:[a,n]}):new k.a({orientation:"portrait",unit:"px",format:[n,a]});r.addImage(e.toDataURL("image/jpeg",1),"JPEG",0,0),r.save(t+".pdf")}(r,e):function(e,t){var a="WebkitAppearance"in document.documentElement.style,n=!!window.sidebar,r="Microsoft Internet Explorer"===navigator.appName||"Netscape"===navigator.appName&&navigator.appVersion.indexOf("Edge")>-1;!a&&!n||r?window.navigator.msSaveBlob(e.msToBlob(),t+".png"):(ae(e.toDataURL()),oe(t+".png"),y.current.click())}(r,e),Q(!1),N.current.scrollLeft=a,N.current.scrollTop=n}),(function(){Q(!1),N.current.scrollLeft=a,N.current.scrollTop=n}))},expandAllNodes:function(){w.current.querySelectorAll(".oc-node.hidden, .oc-hierarchy.hidden, .isSiblingsCollapsed, .isAncestorsCollapsed").forEach((function(e){e.classList.remove("hidden","isSiblingsCollapsed","isAncestorsCollapsed")}))}}})),r.a.createElement("div",{ref:N,className:"orgchart-container "+s,onWheel:o?function(e){!function(e){var t=[],a=1;""===U?q("matrix("+e+", 0, 0, "+e+", 0, 0)"):(t=U.split(","),-1===U.indexOf("3d")?(a=Math.abs(window.parseFloat(t[3])*e))>i&&a<l&&(t[0]="matrix("+a,t[3]=a,q(t.join(","))):(a=Math.abs(window.parseFloat(t[5])*e))>i&&a<l&&(t[0]="matrix3d("+a,t[5]=a,q(t.join(","))))}(1+(e.deltaY>0?-.2:.2))}:void 0,onMouseUp:c&&Y?function(){_(!1),G("default")}:void 0},r.a.createElement("div",{ref:w,className:"orgchart "+u,style:{transform:U,cursor:F},onClick:function(e){e.target.closest(".oc-node")||(E&&E(),C())},onMouseDown:c?function(e){if(e.target.closest(".oc-node"))_(!1);else{_(!0),G("move");var t=0,a=0;if(""!==U){var n=U.split(",");-1===U.indexOf("3d")?(t=parseInt(n[4]),a=parseInt(n[5])):(t=parseInt(n[12]),a=parseInt(n[13]))}if(e.targetTouches){if(1===e.targetTouches.length)D(e.targetTouches[0].pageX-t),R(e.targetTouches[0].pageY-a);else if(e.targetTouches.length>1)return}else D(e.pageX-t),R(e.pageY-a)}}:void 0,onMouseMove:c&&Y?function(e){var t=0,a=0;if(e.targetTouches){if(1===e.targetTouches.length)t=e.targetTouches[0].pageX-A,a=e.targetTouches[0].pageY-H;else if(e.targetTouches.length>1)return}else t=e.pageX-A,a=e.pageY-H;if(""===U)-1===U.indexOf("3d")?q("matrix(1,0,0,1,"+t+","+a+")"):q("matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,"+t+", "+a+",0,1)");else{var n=U.split(",");-1===U.indexOf("3d")?(n[4]=t,n[5]=a+")"):(n[12]=t,n[13]=a),q(n.join(","))}}:void 0},r.a.createElement("ul",null,r.a.createElement(T,{datasource:function e(t,a){return t.relationship=a+(t.children&&t.children.length>0?1:0),t.children&&t.children.forEach((function(a){e(a,"1"+(t.children.length>1?1:0))})),t}(se,"00"),NodeTemplate:m,draggable:b,collapsible:g,multipleSelect:j,changeHierarchy:me,onClickNode:O}))),r.a.createElement("a",{className:"oc-download-btn hidden",ref:y,href:te,download:ce},"\xa0"),r.a.createElement("div",{className:"oc-mask ".concat(K?"":"hidden")},r.a.createElement("i",{className:"oci oci-spinner spinner"})))})));A.defaultProps={pan:!1,zoom:!1,zoomoutLimit:.5,zoominLimit:7,containerClass:"",chartClass:"",draggable:!1,collapsible:!0,multipleSelect:!1};var D=A,M=(a(57),a(14)),I="ADD_CHILD",H="REMOVE_CHILD",R="ADD_SIBBLING",P="UPDATE_NODE",z="GET_CHART",U="UPDATE",q={getChart:function(){return function(e){e({type:z})}},updateChartNode:function(e,t){return function(){var a=Object(h.a)(p.a.mark((function a(n,r){var c,o,i,l;return p.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return c=r(),o=c.chart,i=P,a.next=4,B(e,{chart:o,node:t,type:i});case 4:l=a.sent,n({type:U,payload:l});case 6:case"end":return a.stop()}}),a)})));return function(e,t){return a.apply(this,arguments)}}()},removeChartNode:function(e,t){return function(){var a=Object(h.a)(p.a.mark((function a(n,r){var c,o,i,l;return p.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return c=r(),o=c.chart,i=H,a.next=4,B(e,{chart:o,node:t,type:i});case 4:l=a.sent,n({type:U,payload:l});case 6:case"end":return a.stop()}}),a)})));return function(e,t){return a.apply(this,arguments)}}()},addChartSibling:function(e,t){return function(a,n){var r=B({chart:n().chart,ids:e,node:t,type:R});a({type:U,payload:r})}},addChartChild:function(e,t){return function(){var a=Object(h.a)(p.a.mark((function a(n,r){var c,o,i,l;return p.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return c=r(),o=c.chart,i=I,a.next=4,B(e,{chart:o,node:t,type:i});case 4:l=a.sent,n({type:U,payload:l});case 6:case"end":return a.stop()}}),a)})));return function(e,t){return a.apply(this,arguments)}}()}};function B(e,t){return X.apply(this,arguments)}function X(){return(X=Object(h.a)(p.a.mark((function e(t,a){var n,r,c,o,i;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=a.chart,r=a.node,c=a.type,o=void 0===c?"ADD":c,i=new v.a(n,"id","children"),e.t0=o,e.next=e.t0===P?5:e.t0===H?8:e.t0===I?11:e.t0===R?14:17;break;case 5:return e.next=7,i.updateNodes(t,r);case 7:return e.abrupt("return",Object(d.a)({},i.ds));case 8:return e.next=10,i.removeNodes(t);case 10:return e.abrupt("return",Object(d.a)({},i.ds));case 11:return e.next=13,i.addChildren(t,r);case 13:return e.abrupt("return",Object(d.a)({},i.ds));case 14:return e.next=16,i.addSiblings(t,r);case 16:case 17:return e.abrupt("return",Object(d.a)({},i.ds));case 18:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Y=function(){var e=Object(M.c)((function(e){return e.chart})),t=Object(n.useRef)(),a=Object(n.useState)(e),c=Object(f.a)(a,2),o=c[0],i=c[1],l=Object(M.b)();Object(n.useEffect)((function(){i(e)}),[e]);var s=new v.a(o,"id","children"),d=Object(n.useState)(new Set),m=Object(f.a)(d,2),b=m[0],j=m[1],O=Object(n.useState)(""),E=Object(f.a)(O,2),N=E[0],w=E[1],C=Object(n.useState)(""),y=Object(f.a)(C,2),S=y[0],x=y[1],k=Object(n.useState)(""),L=Object(f.a)(k,2),T=L[0],A=L[1],I=Object(n.useState)(!0),H=Object(f.a)(I,2),R=H[0],P=H[1],z=Object(n.useState)(),U=Object(f.a)(z,2),B=U[0],X=U[1],Y=Object(n.useState)(!1),_=Object(f.a)(Y,2),J=_[0],W=_[1],F=function(){var e=Object(h.a)(p.a.mark((function e(t){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return j(new Set([t])),W(!0),x(t.title),w(t.name),A(t.doj),e.prev=5,e.next=8,V(t.id);case 8:a=e.sent,X(a),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(5),console.log("Error :",e.t0),X(!1);case 16:case"end":return e.stop()}}),e,null,[[5,12]])})));return function(t){return e.apply(this,arguments)}}(),G=function(){var e=Object(h.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:J?l(q.addChartChild(Object(u.a)(b)[0].id,{id:Object(g.a)(),name:N,title:S,doj:T})):alert("Select Node");case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),V=function(){var e=Object(h.a)(p.a.mark((function e(t){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.findParent(t);case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),$=function(){var e=Object(h.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:B&&J?l(q.removeChartNode(Object(u.a)(b).map((function(e){return e.id})),{id:Object(g.a)(),name:N,title:S,doj:T})):alert("Unable to Remove"),j(new Set);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),K=function(){var e=Object(h.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:J?l(q.updateChartNode(Object(u.a)(b).map((function(e){return e.id})),{id:Object(g.a)(),name:N,title:S,doj:T})):alert("Select Node");case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"edit-chart-wrapper"},r.a.createElement("section",{className:"toolbar"},r.a.createElement("div",{className:"new-nodes"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row g-3"},r.a.createElement("div",{className:"row"},r.a.createElement("h6",{className:"pt-2"},"Add/Update Node"),r.a.createElement("div",{className:"col-lg-4 col-md-4 col-sm-12"},r.a.createElement("label",{className:"form-label"},"Name"),r.a.createElement("input",{type:"text",className:"form-control is-valid",id:"validationServer01",placeholder:"Name",value:N,onChange:function(e){return w(e.target.value)},required:!0})),r.a.createElement("div",{className:"col-lg-4 col-md-4 col-sm-12"},r.a.createElement("label",{className:"form-label"},"Title"),r.a.createElement("input",{type:"text",placeholder:"Title",className:"form-control is-valid",id:"validationServer02",value:S,onChange:function(e){return x(e.target.value)},required:!0})),r.a.createElement("div",{className:"col-lg-4 col-md-4 col-sm-12"},r.a.createElement("label",{className:"form-label"},"Date Of Joining"),r.a.createElement("input",{type:"date",placeholder:"Date of Joining",className:"form-control is-valid",id:"validationServer02",value:T,onChange:function(e){return A(e.target.value)}}))),r.a.createElement("div",{className:"row pt-2"},r.a.createElement("button",{type:"button",className:"btn btn-primary btn-sm",disabled:!R,onClick:K},"Update"),r.a.createElement("button",{type:"button",className:"btn btn-primary btn-sm",disabled:!R,onClick:G},"Add Child"),r.a.createElement("button",{type:"button",className:"btn btn-danger btn-sm",disabled:!R,onClick:$},"Remove"),r.a.createElement("button",{type:"button",className:"btn btn-info btn-sm",disabled:!R,onClick:function(){t.current.exportTo("organization_chart","png")}},"Export"),r.a.createElement("div",{className:"form-check"},r.a.createElement("input",{className:"form-check-input",type:"checkbox",checked:R,onChange:function(e){P(e.target.checked),e.target.checked&&t.current.expandAllNodes()}}),r.a.createElement("label",{className:"form-check-label"},"Edit Mode"))))))),r.a.createElement(D,{ref:t,datasource:o,collapsible:!R,onClickNode:F,onClickChart:function(){j(new Set)},pan:!0,zoom:!0}))},_=(a(59),function(){return r.a.createElement(i.a,null,r.a.createElement("div",{className:"wrapper"},r.a.createElement("nav",null,r.a.createElement(i.b,{to:"/chart",activeClassName:"selected"},"OrgChart")),r.a.createElement(l.a,{exact:!0,path:"/",component:s}),r.a.createElement(l.a,{exact:!0,path:"/chart",component:Y})))});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var J=a(19),W=a(34),F={id:"n1",name:"Lao Lao",title:"general manager",doj:"2021-04-12",children:[{id:"n2",name:"Bo Miao",title:"department manager",doj:"2015-05-07"},{id:"n3",name:"Su Miao",title:"department manager",doj:"2019-08-09",children:[{id:"n4",name:"Tie Hua",title:"senior engineer",doj:"2020-04-12"},{id:"n5",name:"Hei Hei",title:"senior engineer",children:[{id:"n6",name:"Dan Dan",title:"engineer",doj:"2021-04-03"},{id:"n7",name:"Xiang Xiang",title:"engineer",doj:"2021-03-02"}]},{id:"n8",name:"Pang Pang",title:"senior engineer",doj:"2021-02-12"}]},{id:"n9",name:"Hong Miao",title:"department manager",doj:"2021-04-10"},{id:"n10",name:"Chun Miao",title:"department manager",doj:"2021-01-12",children:[{id:"n11",name:"Yue ss",title:"senior engineer",doj:"2021-04-12"}]}]};var G=Object(J.b)({chart:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:F,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case z:return{initialState:F};case U:var a=t.payload;return a;default:return e}}}),V=Object(J.c)(G,Object(J.a)(W.a));o.a.render(r.a.createElement(M.a,{store:V},r.a.createElement(_,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[35,1,3]]]);
//# sourceMappingURL=main.90ac663c.chunk.js.map